webpackJsonp([23],{0:function(t,e,a){t.exports=a(60)},60:function(module,exports,__webpack_require__){function submitComment(t){var e=$(this);t.action="addComment",e.removeClass("red_btn"),api.req("articlesDetail",t,function(t){e.addClass("red_btn"),0==t.errCode?(msgs.tip("添加评论成功"),$(".enter_area textarea").val(""),getComments()):msgs.tip(t.errMsg)})}function getComments(){api.req("articlesDetail",commentPull,function(t){0==t.errCode&&($(".comment_all .title").text("全部评论  （"+t.resultData.totalCount+"）"),setList(t.resultData))})}function setList(t){render(React.createElement(List,{data:t}),document.getElementById("commentList"))}__webpack_require__(2);var api=__webpack_require__(3),msgs=__webpack_require__(16),List=__webpack_require__(61),render=React.render;!function(){api.req("articlesDetail",{action:"blogCourse"},function(t){if(0==t.errCode){for(var e="",a=0;a<t.resultData.list.length;a++){var n=t.resultData.list[a];e+='<li><a href="/course/view/'+n.courseUuid+'" target="_blank">\t<img src="'+n.courseLogo+'" alt="">\t<p>'+n.courseName+"</p></a></li>"}$(".hots_course").html(e)}})}(),$(".search_panel .btn").on("click",function(){if(0==$("#userInfo").length)return msgs.alert({content:"登录后才可以写博客或提疑问哦",type:"alert",callback:function(){window.location.href=$("#loginLink").attr("href")}}),!1}),$(".blog_main_left").on("click",".add_comment",function(){if(0===$("#userInfo").length)return msgs.alert({content:"登录后才可以参与评论",callback:function(){window.location.href=$("#loginLink").attr("href")}}),!1;if(!$(this).hasClass("red_btn"))return!1;var t=$(this).parents(".comment_panel"),e={pId:t.attr("cid"),articlesUserId:t.attr("uid"),articlesUserImg:t.attr("uimg"),articlesNickname:t.attr("uname"),articlesId:$("#articlesId").val(),content:$.trim(t.find("textarea").val())};return""==e.content?(msgs.tip("评论内容不可为空"),!1):e.content.length>5e3?(msgs.tip("评论内容太长"),!1):(0==$(this).parents("#myComment").length&&$(this).parents(".comment_panel").remove(),submitComment.call(this,e),!1)});var isA={action:"isAttention",articlesId:$("#articlesId").val()};api.req("articlesDetail",isA,function(t){if(0==t.errCode&&"1"==t.resultData.isAttention){var e=$(".articles_more .care_btn");e.addClass("on").html("已关注<em>("+e.attr("data-an")+")</em>")}if(0==t.errCode&&"1"==t.resultData.isAdmire){var e=$(".articles_more .admire_btn");e.addClass("on").html("已赞<em>("+e.attr("data-an")+")</em>")}}),$(".articles_more .btn").on("click",function(){var t=$(this),e="关注",a=$("#articlesId").val(),n={action:"attention",articlesId:a,isAttention:t.hasClass("on")?0:1};t.hasClass("admire_btn")&&(n.isAdmire=t.hasClass("on")?0:1,n.actionType=1,e="点赞",delete n.isAttention),api.req("articlesIndex",n,function(a){if(0==a.errCode)if(0===n.isAttention||0===n.isAdmire){msgs.tip("取消"+e+"成功");var i=parseInt(t.attr("data-an"))-1;t.attr("data-an",i).removeClass("on").html(e+"<em>("+i+")</em>")}else{msgs.tip(e+"成功");var i=parseInt(t.attr("data-an"))+1;t.attr("data-an",i).addClass("on").html("已"+e+"<em>("+i+")</em>")}else msgs.tip(a.errMsg)})}),$(".blog_main_left").on("click",".close_comment",function(){return $(this).parents(".comment_panel").remove(),!1}),$(".blog_main_left").on("keyup",".enter_area textarea",function(){var t=$(this).val().length;$(this).parents(".comment_panel").find(".ent_lan").text(t+"/5000字"),t>5e3?$(this).parent(".enter_area").addClass("error"):$(this).parent(".enter_area").removeClass("error")}),$("#commentList").on("click",".hf_btn",function(){if(0===$("#userInfo").length)return msgs.alert({content:"登录后才可以参与评论",callback:function(){window.location.href=$("#loginLink").attr("href")}}),!1;if($(this).parent(".action_p").next(".comment_panel").length>0)return!1;var t=$(this).parents(".item_floor").attr("data-pid"),e=$(this).parent(".action_p"),a='<div class="comment_panel" uid="'+e.attr("data-uid")+'" uimg="'+e.attr("data-uimg")+'" uname="'+e.attr("data-uname")+'" cid="'+t+'">\t<div class="enter_area">\t\t<textarea name="" id="" cols="30" rows="8"></textarea>\t</div>\t<div class="action_area clearfix"><span class="fl ent_lan">0/5000字</span>\t\t<div class="fr">\t\t\t<a href="" class="btn gray_btn close_comment">取消</a>\t\t\t<a href="" class="btn red_btn add_comment">评论</a>\t\t</div>\t</div></div>';return $(this).parent(".action_p").after(a),!1});var commentPull={action:"commentList",pageCurrent:1,pageSize:20,articlesId:$("#articlesId").val()};with($("#commentList").on("click",".sub_page .ipg",function(){var t=this,e=$(this).attr("data-id"),a={action:"getTwoComment",id:$(this).parents(".item_floor").attr("data-pid"),pageCurrent:e,pageSize:5};return api.req("articlesDetail",a,function(e){if(0==e.errCode){var a="";e.resultData.list.map(function(t,e){a+='<div>\t<div class="other_cont main_cont">\t\t<div class="hd"><em>'+t.nickname+"</em>回答："+t.forNickname+'</div>\t\t<p class="time">'+t.createTime+'</p>\t\t<div class="bd">'+t.content+'</div>\t</div>\t<div class="action_p" data-uid="'+t.userId+'" data-uimg="'+t.userImg+'" data-uname="'+t.nickname+'" data-cid="'+t.id+'">\t\t<span class="btn blue hf_btn">回复</span>\t</div></div>'}),$(t).parent(".sub_page").prev(".two_comment_box").html(a),$(t).addClass("active").siblings().removeClass("active")}else msgs.tip(e.errMsg)}),!1}),$("#commentList").on("click",".main_page .ipg",function(){var t=$(this).attr("data-id");return commentPull.pageCurrent=t,getComments(),!1}),getComments(),api.req("articlesDetail",{action:"getBlogger",userId:$("#blogger").attr("data-buid")},function(t){0==t.errCode&&("1"==t.resultData.isAttention?$("#blogger .follow_btn").addClass("on").text("已关注"):"2"==t.resultData.isAttention&&($(".blog_title").append('<a class="editor_btn" href="/article/editor?no='+$(".blog_title").attr("data-id")+'">编辑</a>'),$("#blogger .follow_btn").remove()),$("#blogger .more_info").html("<span>"+t.resultData.articlesAccount+'篇文章</span> | <span class="fans_num" data-num="'+t.resultData.fansAccount+'">'+t.resultData.fansAccount+"关注</span>")),$("#blogger").attr("data-bid",t.resultData.id)}),$("#blogger .follow_btn").on("click",function(){if(0===$("#userInfo").length)return msgs.alert({content:"你还没有登录",callback:function(){window.location.href=$("#loginLink").attr("href")}}),!1;var t=$(this),e={action:"attentionBlogger",isAttention:t.hasClass("on")?0:1,bloggerUserId:$("#blogger").attr("data-buid"),bloggerId:$("#blogger").attr("data-bid")};return api.req("articlesDetail",e,function(a){if(0==a.errCode){var n=parseInt($(".blog_main_right .fans_num").attr("data-num"));1==e.isAttention?(msgs.tip("关注成功"),t.addClass("on").text("已关注"),n++):(msgs.tip("取消关注成功"),t.removeClass("on").text("关注"),n--),$(".blog_main_right .fans_num").attr("data-num",n).text(n+"关注")}else msgs.tip(a.errMsg)}),!1}),window._bd_share_config={common:{bdSnsKey:{},bdText:"",bdMini:"2",bdMiniList:!1,bdPic:"",bdStyle:"0",bdSize:"16"},slide:{type:"slide",bdImg:"2",bdPos:"left",bdTop:"100"}},document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]},61:function(t,e,a){var n=(a(4),a(21)),i=React.createClass({displayName:"tmpApp",getDefaultProps:function(){return{}},getInitialState:function(){return{data:this.props.data}},componentWillMount:function(){},componentWillReceiveProps:function(t){},_subList:function(t){var e=[];t.list.map(function(t,a){e.push(React.createElement("div",{key:"subitem-"+a},React.createElement("div",{className:"other_cont main_cont"},React.createElement("div",{className:"hd"},React.createElement("em",null,t.nickname),"回答：",t.articlesNickname),React.createElement("p",{className:"time"},t.createTime),React.createElement("div",{className:"bd"},t.content)),React.createElement("div",{className:"action_p","data-uid":t.userId,"data-uimg":t.userImg,"data-uname":t.nickname,"data-cid":t.id},React.createElement("span",{className:"btn blue hf_btn"},"回复"))))});var a={totalPage:t.totalPage,endPageIndex:t.totalPage,numPerPage:t.pageSize,beginPageIndex:1,pageNum:t.pageCurrent,totalCount:t.totalCount};return React.createElement("div",{"data-pagenum":"1"},React.createElement("div",{className:"two_comment_box"},e),React.createElement(n,{key:"subpage",cname:"page sub_page",pageData:a}))},_dealWithData:function(t){function e(t){var e=t.map(function(t,e){var n;return t.page.list.length>0&&(n=a._subList(t.page)),React.createElement("li",{className:"item_floor","data-pid":t.id},React.createElement("div",{className:"face_p"},React.createElement("img",{src:t.userImg,alt:""})),React.createElement("div",{className:"comment_content"},React.createElement("div",{className:"main_cont"},React.createElement("div",{className:"hd"},React.createElement("em",null,t.nickname),"回答："),React.createElement("p",{className:"time"},t.createTime),React.createElement("div",{className:"bd"},t.content)),React.createElement("div",{className:"action_p","data-uid":t.userId,"data-uimg":t.userImg,"data-uname":t.nickname,"data-cid":t.id},React.createElement("span",{className:"btn blue hf_btn"},"回复")),n))});return React.createElement("ul",{key:"ul1",className:"comment_floor"},e)}var a=this,i=[];i.push(e(t.list));var r={totalPage:t.totalPage,endPageIndex:t.totalPage,numPerPage:t.pageSize,beginPageIndex:1,pageNum:t.pageCurrent,totalCount:t.totalCount};return i.push(React.createElement(n,{key:"page",cname:"page main_page",pageData:r})),i},loopRender:function(){var t=[];!!this.props.itemStyle&&this.props.itemStyle,!!this.props.itemClass&&this.props.itemClass;if(this.props.data){var e=this.props.data;if(0==e.totalCount)return React.createElement("div",{className:"nodata"},"暂无相关数据");t=this._dealWithData(e)}return t},componentDidMount:function(){},render:function(){var t=this.loopRender();return React.createElement("div",{className:"list-wrap"},t)}});t.exports=i}});