# 后台常用接口协议定义

**XXXX后台通讯协议**

 

 

 

**更改记录**

| 版本   Version | 日期   Date  | 作者   Author | 内容描述   Description                       |
| ------------ | ---------- | ----------- | ---------------------------------------- |
| V1.0         | 2014-04-23 | XXX         | 初稿                                       |
| V2.0         | 2014-5-23  | XXX         | 根据需求修改                                   |
| V2.1         | 2014-5-30  | XXX         | 增加数据库表                                   |
| V2.2         | 2014-6-02  | XXX         | 根据需求修改数据库表                               |
| V2.2.1       | 2014-6-20  | XXX         | 根据UI设计修改金币                               |
| V2.2.2       | 2014-6-25  | XXX         | 增加系统参数                                   |
| V2.2.3       | 2014-7-4   | XXX         | 增加3.17接口                                 |
| V2.2.4       | 2014-7-11  | XXX         | 修改3.14睡眠上传接口                             |
| V2.2.5       | 2014-7-14  | XXX         | 修改3.4、3.5返回日期格式， 3.4、3.6、3.16增加每天能够获取总金币数 |
| V2.2.6       | 2014-8-15  | XXX         | 提交睡眠、运动返回接口增加当天金币限制数                     |
| V2。2.7       | 2014-9-1   | XXX         | 请求版本增加md5字段校验                            |
| V2.2.9       | 2014-9-16  | XXX         | 增加系统参数语言、修改3.18接口，表 5.17版本升级说明增加英文       |
| V2.4.0       | 2014-12-19 | XXX         | 增加公司客户获取接口,获取睡眠算法接口                      |
| V2.5.0       | 2014-12-23 | XXX         | 增加3.22接口，3.23接口，修改表5.16，5.17增加表5.24      |
| V2.5.1       | 2015-1-7   | XXX         | 修改3.4,3.6 接口，删除5.17                      |
| V2.5.2       | 2015-1-22  | XXX         | 增加3.23。3.24                              |
| V2.5.4       | 2015-3-24  | XXX         | 修改3.20，增加3.25                            |
| V2.5.5       | 2015-4-20  | XXX         | 系统参数增加厂商字段，5.18设备版本信息表增加厂商字段             |
| V2.5.6       | 2015-4-22  | XXX         | 修改接口3.17，修改数据库5.18、5.23                  |
| V2.5.7       | 2015-5-20  | XXX         | 增加接口3.26，修改接口3.18                        |
| V2.5.8       | 2015-5-26  | XXX         | 增加接口3.27、3.28                            |
| V2.5.9       | 2015-6-5   | XXX         | 修改厂商代码信息                                 |
| V2.6.0       | 2015-07-28 | XXX         | 修改5.18设备版本信息表appname和appurl字段长度          |
| V2.6.1       | 2015-08-10 | XXX         | 第四章添加睡眠状态代码表                             |
| V2.6.2       | 2015-08-11 | XXX         | 添加中兴手环厂商代码                               |
| V2.6.3       | 2015-08-13 | XXX         | 修改接口3.24，添加用户名字段                         |
| V2.6.4       | 2015-08-19 | XXX         | 修改接口3.17，添加升级时间字段，增加接口3.29(获取连接参数)，增加数据库5.28、5.29 |
| V2.6.5       | 2015-08-19 | XXX         | 修改接口3.22，增加登录返回蓝牙连接参数，修改返回连接参数值类型        |
| V2.6.6       | 2015-08-25 | XXX         | 修改ZTE厂商代码为7，添加fitbandC厂商为代码6             |
| V2.6.7       | 2015-10-20 | XXX         | 添加DONG.、OPPO圆形屏ZTE DESAY厂商代码             |
| V2.6.8       | 2015-10-22 | XXX         | 添加FitbandF3厂商代码                          |
| V2.6.8       | 2015-10-27 | XXX         | 添加BestFit厂商代码，修改OPPO圆形屏ZTE DESAY产品名称分别为TouchBand和FitbandF4 |
| V2.6.9       | 2016-01-19 | XXX         | 增加联想智能跑鞋厂商代码                             |
| V2.7.0       | 2016-01-29 | XXX         | 增加B521三款产品的厂商代码                          |
| V2.7.1       | 2016-02-19 | XXX         | 添加专项运动接口（3.30、3.31）相关数据表接口（5.30、5.31、5.32） |
| V2.7.2       | 2016-03-01 | XXX         | 专项运动增加步数数组                               |
| V2.7.3       | 2016-03-18 | XXX         | 厂商号：B521(有屏无心率)修改为B522(有屏无心率)            |
| V2.7.4       | 2016-03-19 | XXX         | 增加B502厂商号                                |
| V2.7.5       | 2016-06-21 | XXX         | 增加B517等厂商代码，支持不同语言提示语返回                  |
| V2.7.6       | 2016-08-18 | XXX         | 1、  增加自动睡眠接口（3.5）  2、  增加使用情况接口(3.33)  3、  增加全天心率接口（3.34/3.35） |
| V2.7.7       | 2016-09-22 | XXX         | 增加设置接口                                   |

 

# 一 、接口规范

| **序号** | **名称**              | **接口格式**                                 | **接口规范** | **接口参数**          | **参数说明** |
| ------ | ------------------- | ---------------------------------------- | -------- | ----------------- | -------- |
| 1      | 用户信息接口              | /Service/ userinfoDatas/                 | rest     | 数据：datas  格式：json |          |
|        | 用户注册                | /Service/ userinfoDatas/register         | rest     | 数据：datas  格式：json |          |
|        | 用户登录                | /Service/ userinfoDatas/login            | rest     | 数据：datas  格式：json |          |
|        | 用户信息                | /Service/  userinfoDatas/info            | rest     | 数据：datas  格式：json |          |
|        | 用户登录返回所有            | /Service/  userinfoDatas/loginAll        | rest     | 数据：datas  格式：json |          |
|        | 重置密码                | /Service/  userinfoDatas/resetpasswd     | rest     | 数据：datas  格式：json |          |
|        | 修改密码                | /Service/  userinfoDatas/modifypasswd    | rest     | 数据：datas  格式：json |          |
| 2、     | 睡眠接口                | /Service/sleepDatas/                     | rest     | 数据：datas  格式：json |          |
|        | 睡眠原始数据上传            | /Service/sleepDatas/uploadBaseSleep      | rest     | 数据：datas  格式：json |          |
|        | 自动睡眠原始数据上传          | /Service/sleepDatas/uploadAutoBaseSleep  | rest     | 数据：datas  格式：json |          |
|        | 睡眠状态下载              | /**Service**/sleepDatas/downloadSleep    | rest     | 数据：datas  格式：json |          |
| 3、     | 运动接口                | /**Service**/sportsDatas/                | rest     | 数据：datas  格式：json |          |
|        | 运动数据上传              | /**Service**/sportsDatas/upload          | rest     | 数据：datas  格式：json |          |
|        | 运动数据下载              | /**Service**/sportsDatas/download        | rest     | 数据：datas  格式：json |          |
|        | 专项运动数据上传            | /**Service**/sportsDatas/uploadRTSport   | rest     | 数据：datas  格式：json |          |
|        | 专项运动数据下载            | /**Service**/sportsDatas/downloadRTSport | rest     | 数据：datas  格式：json |          |
| 4.     | 各种提醒及设置信息           | /**Service**/ setDatas/                  | rest     | 数据：datas  格式：json |          |
|        | 上传MAC地址             | /**Service**/ setDatas/uploadMAC         | rest     | 数据：datas  格式：json |          |
|        | 下载MAC地址             | /**Service**/ setDatas/downloadMAC       | rest     | 数据：datas  格式：json |          |
|        | 上传设置信息              | /**Service**/ setDatas/uploadSET         | rest     | 数据：datas  格式：json |          |
|        | 下载设置信息              | /**Service**/ setDatas/downloadSET       | rest     | 数据：datas  格式：json |          |
|        | 上传目标设置信息            | /**Service**/ setDatas/uploadAIM         | rest     | 数据：datas  格式：json |          |
|        | 下载目标设置信息            | /**Service**/ setDatas/downloadAIM       | rest     | 数据：datas  格式：json |          |
|        | 上传客户NC信息            | /**Service**/setDatas/ uploadNC          | rest     | 数据：datas  格式：json |          |
|        | 第三方绑定接口             | /**Service/setDatas/ **thirdBind         | rest     | 数据：datas  格式：json |          |
|        | 获取微信链接接口            | /**Service/setDatas/ downloadWXURL**     | rest     | 数据：datas  格式：json |          |
|        | 获取蓝牙连接参数            | /**Service/setDatas/ getbleparams**      | rest     | 数据：datas  格式：json |          |
| 5、     | 金币接口                | /**Service**/goldDatas                   | rest     | 数据：datas  格式：json |          |
|        | 每天签到                | /**Service**/goldDatas/signIn            | rest     | 数据：datas  格式：json | 预留       |
|        | 提交分享                | /**Service**/goldDatas/share             | rest     | 数据：datas  格式：json |          |
|        | 绑定账号                | /**Service**/goldDatas/bind              | rest     | 数据：datas  格式：json |          |
|        | 获取金币详情              | /**Service**/goldDatas/gain              | rest     | 数据：datas  格式：json |          |
| 6、     | 其他业务接口              | /**Service**/othersDatas                 | rest     | 数据：datas  格式：json |          |
|        | 获取版本信息接口            | /**Service**/othersDatas/version         | rest     | 数据：datas  格式：json |          |
|        | 上传设备版本信息            | /**Service**/othersDatas/uploadVersion   | rest     | 数据：datas  格式：json |          |
|        | 获取历史数据              | /**Service**/othersDatas/downloadAll     | rest     | 数据：datas  格式：json |          |
|        |                     |                                          |          |                   |          |
| 7      | 其他公司接口              | /**Service**/companyDatas                | rest     | 数据：datas  格式：json |          |
|        | 获取睡觉运动历史数据          | /**Service**/companyDatas/downloadSS     | rest     | 数据：datas  格式：json |          |
|        | 获取睡眠质量接口            | /**Service**/companyDatas/sleepAnalyse   | rest     | 数据：datas  格式：json |          |
|        | 根据用户名获取SN或根据SN获取用户名 | /**Service**/companyDatas/downloadBY     | rest     | 数据：datas  格式：json |          |
|        | 点测心率数据上传            | /**Service/**othersDatas/uploadHeartrates | rest     | 数据：datas  格式：json |          |
|        | 获取使用情况              | /Service/setDatas/getUseStatus           | rest     | 数据：datas  格式：json |          |
|        | 全天心率数据上传            | /Service/othersDatas/uploadDayHeartrates | rest     | 数据：datas  格式：json |          |
|        | 全天心率数据下载            | /Service/othersDatas/downloadDayHeartrates | rest     | 数据：datas  格式：json |          |

# 二、报文结构说明

## 2.1 HTTP承载方式

### 1.2.1 报文格式

报文由系统参数和应用接口参数组成。整个报文采用base64加密，GZIP压缩，先压缩后加密，解码方式是先解密后解压缩。

**参数字段**

| **字段****** | **参数说明****** | **举例******                               |
| ---------- | ------------ | ---------------------------------------- |
| sysdata    | 系统参数信息       | sysdata:{protocoltype”:”V1.0.0”….. SendDate….} |
| rqdata     | 应用业务数据       | rqdata:{…….}                             |

{
sysdata:{……},
rqdata:{…….}

} 

备注：只在rqdata里面的内容加密跟压缩

“protocoltype”:”100”代表的是base64加密方式

### 1.2.2 系统参数格式

          

**系统参数字段**

| **字段**       | **参数说明**   | **举例**                            |
| ------------ | ---------- | --------------------------------- |
| protocolType | 协议版本号      | “protocoltype”:”100”              |
| manufCode    | 厂商代码       | “manuf”:”01”（厂商代码参照4.6厂商代码）       |
| appVer       | App版本号     | “appVer”:”V1.0.0”                 |
| deviceVer    | 手环版本号      | “deviceVer”:”v1.0.0”              |
| blueVer      | 手环蓝牙版本号    | “blueVer”:”v1.0.0”                |
| deviceId     | 设备IMEI号    | “deviceId”:”863500000000000”      |
| mobileType   | 手机型号       | “mobileType”:”xiaomi”             |
| systemVer    | 系统版本       | “systemVer”:”Android4.2”          |
| systemLang   | 系统语言       | “systemLang”:”en/zh/es/fr”        |
| sendDate     | 数据发送时间     | “sendDate”:”2014-04-17  14:20:30” |
| timeZone     | 数据发送的本地时区名 | “timeZone”:” America/New_York”    |

 

### 1.2.3 应用接口参数格式

应用接口参数由各业务模块组成，详见“应用接口报文描述“

# 三 、应用接口报文描述

## 3.1 用户注册

功能：终端向健康后台注册用户

请求包体：

| **标识**   | **数据类型** | **说明**    |
| -------- | -------- | --------- |
| username | String   | 账号(不超过20) |
| passwd   | String   | 密码        |
| email    | String   | 邮箱        |

{“username”:”” ,”passwd”:””,”email”:”” }****

响应包体：

| **标识**    | **数据类型** | **说明**           |
| --------- | -------- | ---------------- |
| stateCode | String   | 成功001/失败002 状态码/ |
| msg       | String   | 失败描述信息           |

{

“stateCode”:””,

“msg”:””

}

## 3.2 用户登录

功能：用户登录健康后台请求****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |
| passwd   | String   | 密码     |

{“username”:”” ,”passwd”:””}****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回个人信息    |

data字典：

| 名称               | 类型     | 描述                  |
| ---------------- | ------ | ------------------- |
| data.nickname    | String | 昵称                  |
| data.sexCode     | int    | 性别 男1/女 0           |
| data.birthday    | String | 出生日期（格式:  yyyyMMdd） |
| data.height      | int    | 身高                  |
| data.weight      | String | 体重                  |
| data.address     | String | 地址（精确到市）            |
| data.portraitUrl | String | 头像地址                |

 

响应值：

{

“stateCode”:””,

“msg”:””,

“data”:{“nickname”:””,

“sexCode”:””

“birthday”:””,

“height”:””,

“weight”:””,

“address”:””,

 “portraitUrl”:””,

}

}

## 3.3 用户信息

功能：向健康后台提交用户信息数据

请求包体：

| **标识**      | **数据类型** | **说明**              |
| ----------- | -------- | ------------------- |
| username    | String   | 用户名                 |
| nickname    | String   | 昵称                  |
| sexCode     | int      | 性别 男1/女 0           |
| birthday    | String   | 出生日期（格式:  yyyyMMdd） |
| height      | int      | 身高                  |
| weight      | int      | 体重                  |
| address     | String   | 地址（精确到市）            |
| portraitUrl | String   | 头像字符串（base64）       |

{

“username”:””,

“nickname”:””,

“sexCode”:””

“birthday”:””,

“height”:””,

“weight”:””,

“address”:””,

“portraitUrl”:””,

}

 

响应包体：            

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

 

{

“stateCode”:””,

“msg”:””

”}

## 3.4 睡眠原始数据上传

功能：上传睡眠原始数据****

请求包体：

   ****

| **标识**               | **数据类型** | **说明**                    |
| -------------------- | -------- | ------------------------- |
| username             | String   | 用户名                       |
| baseSleep            |          |                           |
| baseSleep .gtime     |          | 该次睡眠时间yyyyMMddHHmm        |
| baseSleep.heartRates |          | 心率原始数据[]                  |
| heartRates .gt       | String   | 时间yyyyMMddHHmm            |
| heartRates .gv       | int      | 值                         |
| baseSleep .acts      |          | 动作原始数据[]                  |
| acts  .gt            | String   | 时间yyyyMMddHHmm            |
| acts  .gv            | int      | 值                         |
| baseSleep.envs       |          | 环境（温湿度）原始数据[]             |
| envs.temp            | float    | 温度值                       |
| envs.humi            | Int      | 湿度值                       |
| envs.time            | String   | 时间yyyyMMddHHmm            |
| bind                 |          | 数组                        |
| bind .gtype          | String   | 01（参见四.4第三方接入gtype类型编码说明） |
| bind .openid         | String   | 用户的ID，与QQ号码一一对应           |
| Bind.tokenkey        | String   | access_token              |
| bind .appid          | String   | 申请QQ登录成功后，分配给应用的appid     |

 

{“username”:””,

      “baseSleep”[“gtime”:””,

 “heartRates” [{“gt”:””,” gv”:”” },…….],

“acts” [{“gt”:””,” gv”:”” },…….],

},

{ “gtime”:””,

 “heartRates” [{“gt”:””,” gv”:”” },…….],

“acts” [{“gt”:””,” gv”:”” },…….],

“envs”:[{“temp”:””,”humidity”:””,”time”:””}….]

}，

……..]

         “bind”[{

“gtype”:””

“openid”:””

“tokenkey”:””

“appid”:””

},…….]},

 

}  ****

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回睡眠状态组[] |

data字典：

| **标识**           | **数据类型** | **说明**                  |
| ---------------- | -------- | ----------------------- |
| data.gdate       | String   | 睡眠日期（yyyyMMdd）          |
| data.sleepTime   | String   | 睡眠时间（yyyyMMddHHmm）      |
| data.gtime       | Integer  | 睡眠时长(分钟)                |
| data.wakeupTime  | String   | 醒来时间 （yyyyMMddHHmm）     |
| data.wakeup      | Integer  | 醒来次数                    |
| data.quantity    | Float    | 质量分                     |
| data.sleepState  | String   | 睡眠状态数组（”sleepState”:[]） |
| data  .dayGold   | int      | 当天总的上限金币数               |
| data.detail      |          | 详情数组[]                  |
| detail.gtype     | String   | 类型编码02                  |
| detail.gtime     | String   | 得金币时间（HH:mm ）           |
| detail.gevent    | String   | 事件编码XX                  |
| detail.gold      | int      | 金币数                     |
| data.envQuantity | float    | 环境评分                    |
| data.avgTemp     | float    | 平均温度                    |
| data.avgHumi     | int      | 平均湿度                    |

**sleepState****：**

| **标识**    | **数据类型** | **说明**               |
| --------- | -------- | -------------------- |
| stateCode | String   | 睡眠状态码                |
| startTime | String   | 状态开始时间（yyyyMMddHHmm） |
| endTime   | String   | 状态结束时间（yyyyMMddHHmm） |

 

{

“stateCode”:””,

“msg”:””,

“data”[{

    “gdate”:””,

“sleepTime”:””,

”gtime”:”” 

“wakeupTime”:””,

“wakeup”:””,

” quantity”:”” ,

"sleepState"[{“stateCode”:””,”startTime”:””,”endTime”:””},…….] 

“dayGold”:””

 “detail”[{

        “gtype”:””

“gtime”:””,

“gevent”:””

“gold”:””}]

},……..

]

}

## 3.5自动睡眠原始数据上传(保留)

功能：上传睡眠原始数据

        重要：针对新的自动检测睡眠算法，对睡眠接口做大的调整，由于睡眠算法会输出正常的睡眠结果，还会输出另外一种特殊的运动数据—静坐，所以在返回包体就加入静坐状态的返回，APP接收到之后，和运动数据合并显示；服务器会将静坐状态值存入运动数据表，所以APP不要再上传有睡眠计算出的静坐运动数据****

请求包体：

   ****

| **标识**                    | **数据类型** | **说明**                                 |
| ------------------------- | -------- | -------------------------------------- |
| username                  | String   | 用户名                                    |
| baseSleep                 |          |                                        |
| baseSleep.heartRates      |          | 心率原始数据[],包括originalState所囊括的所有时间内的心率数据 |
| heartRates .gt            | String   | 时间yyyyMMddHHmm                         |
| heartRates .gv            | int      | 值                                      |
| baseSleep.originalState   |          | 原始睡眠状态                                 |
| originalState.startTime   | String   | 状态开始时间（yyyyMMddHHmm）                   |
| originalState.endTime     | String   | 状态结束时间（yyyyMMddHHmm）                   |
| originalState.stateCode[] | int[]    | startTime和endTime这段时间内采样的睡眠状态码，最多144个  |
| originalState.stateNum    | int      | stateCode[]采样数组大小                      |
| originalState.stateCyc    | int      | stateCode[]采样周期（隔多长时间采样一次状态），单位为分钟     |

 

{“username”:””,

      “baseSleep”:{

 “heartRates” [{“gt”:””,” gv”:”” },…],

" originalState "[{”startTime”:””,”endTime”:””,“stateCode”:[11,12,11…] },

” stateNum”:45, ” stateCyc”:10},…]

}

}  ****

响应包体： 

| **标识**     | **数据类型** | **说明**     |
| ---------- | -------- | ---------- |
| stateCode  | String   | 成功/失败 状态码  |
| msg        | String   | 失败描述信息     |
| data.sleep |          | 返回睡眠状态数组[] |
| data.sit   |          | 返回静坐状态数组[] |

sleep字典：

| **标识**               | **数据类型** | **说明**                  |
| -------------------- | -------- | ----------------------- |
| sleep.gdate          | String   | 睡眠日期（yyyyMMdd）          |
| sleep.sleepTime      | String   | 睡眠时间（yyyyMMddHHmm）      |
| sleep.gtime          | Integer  | 睡眠时长(分钟)                |
| sleep.wakeupTime     | String   | 醒来时间 （yyyyMMddHHmm）     |
| sleep.wakeupDuration | Int      | 醒来时长(分钟)                |
| sleep.wakeup         | Integer  | 醒来次数                    |
| sleep.quantity       | Float    | 质量分                     |
| sleep.sleepState     | String   | 睡眠状态数组（”sleepState”:[]） |

**sleepState****：**

| **标识**    | **数据类型** | **说明**               |
| --------- | -------- | -------------------- |
| stateCode | String   | 睡眠状态码                |
| startTime | String   | 状态开始时间（yyyyMMddHHmm） |
| endTime   | String   | 状态结束时间（yyyyMMddHHmm） |

 

**Sit****字典：**

| **标识**        | **数据类型** | **说明**               |
| ------------- | -------- | -------------------- |
| sit.stateCode | String   | 静坐状态码（3）             |
| sit.startTime | String   | 状态开始时间（yyyyMMddHHmm） |
| sit.endTime   | String   | 状态结束时间（yyyyMMddHHmm） |

 

 

{

“stateCode”:””,

“msg”:””,

“data”：{”sleep”:[{

    “gdate”:””,

“sleepTime”:””,

”gtime”:”” 

“wakeupTime”:””,

“wakeup”:””,

” quantity”:”” ,

"sleepState"[{“stateCode”:””,”startTime”:””,”endTime”:””},…….] }],

 

"sit"[{“stateCode”:””,”startTime”:””,”endTime”:””},…….]

}

}

 

## 3.6 睡眠数据下载

功能：从健康后台获取睡眠数据

请求包体：   ****

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| username  | String   | 用户名          |
| startDate | String   | 开始日期yyyyMMdd |
| endDate   | String   | 结束日期yyyyMMdd |

{"username":"iwan2"," startDate ":"20140101"," endDate ":"20140228"}

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回睡眠状态组[] |

data字典：

| **标识**          | **数据类型** | **说明**                  |
| --------------- | -------- | ----------------------- |
| data.gdate      | String   | 睡眠日期（yyyyMMdd）          |
| data.sleepTime  | String   | 睡眠时间（yyyyMMddHHmm）      |
| data.gtime      | Integer  | 睡眠时长                    |
| data.wakeupTIme | String   | 醒来时间 （yyyyMMddHHmm）     |
| data.wakeup     | Integer  | 醒来次数                    |
| data.quantity   | Float    | 质量分                     |
| data.sleepState | String   | 睡眠状态数组（”sleepState”:[]） |
| data.heartRates | String   | 心率数据数组（”heartRates”:[]） |
| data.envs       | String   | 环境数据数组                  |

{

“stateCode”:””,

“msg”:””,

“data”[{

    “gdate”:””,

“sleepTime”:””,

”gtime”:”” 

“wakeupTime”:””,

“wakeup”:””,

” quantity”:”” ,

"sleepState"[……..] 

“heartRates” [{“gt”:””,” gv”:”” },…….],

“envs”:[{“temp”:””,”humidity”:””,”time”:””}….]

},……..

]

}

 

 

## 3.7 运动数据上传

功能：上传运动数据到健康后台

请求包体：

| **标识**               | **数据类型**   | **说明**                    |      |      |
| -------------------- | ---------- | ------------------------- | ---- | ---- |
| username             | String     | 用户名                       |      |      |
| sportdata            |            | 运动数组（”sportdate”:[]）      |      |      |
| sportdata.gdate      | String     | 运动日期yyyyMMdd              |      |      |
| sportdata.detail     |            | 运动详细数组                    |      |      |
| detail.startTime     | String     | 每次起始时间yyyyMMddHHmmss      |      |      |
| detail.endTime       | String     | 每次运动结束时间yyyyMMddHHmmss    |      |      |
| detail.sportTypeCode | Integer    | 运动类型：（0为走路，1为跑步，2为骑行）     |      |      |
| detail.distance      | int        | 距离                        |      |      |
| detail. calorie      | float      | 消耗卡路里                     |      |      |
| detail .livenCode    | String     | 有氧值标记（0无氧值、1有氧值）          |      |      |
| detail. mode         | Integer    | 0代表gps的记录,1代表手环的记录，       |      |      |
| detail .pace****     | Integer    | 步数                        |      |      |
| detail .location     |            | 经纬度数组[]                   |      |      |
|                      | BigDecimal | longitude                 | 经度   |      |
| latitude             | 维度         |                           |      |      |
| distance（int）        | 距离         |                           |      |      |
| speed(float)         | 速度         |                           |      |      |
| bind                 |            | 数组                        |      |      |
| bind .gtype          | String     | 01（参见四.4第三方接入gtype类型编码说明） |      |      |
| bind .openid         | String     | 用户的ID，与QQ号码一一对应           |      |      |
| Bind.tokenkey        | String     | access_token              |      |      |
| bind .appid          | String     | 申请QQ登录成功后，分配给应用的appid     |      |      |
|                      |            |                           |      |      |

{

“username”:””,

“sportdata”:[{

 “gdate”:””,

“detail” :[{ “startTime”:””,

 “endTime”:””,

“sportTypeCode”:””,

”distance”:”” ,

“calorie”:””

“livenCode”:””,

“gmode”:””

“pace”:””

" location "[……..] 

},…….]

},………..]

     “bind”[{

“gtype”:””

“openid”:””

“tokenkey”:””

“appid”:””

},…….]},

}

响应包体：            

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回金币数组    |

data字典：

| **标识**         | **数据类型** | **说明**          |      |
| -------------- | -------- | --------------- | ---- |
| data.gdate     | String   | 得金币时间（yyyyMMdd） |      |
| data  .dayGold | int      | 每天总的上限金币数100    |      |
| data.detail    |          | 详情数组[]          |      |
| detail.gtype   | String   | 类型编码03          |      |
| detail.gtime   | String   | 得金币时间（HH:mm ）   |      |
| detail.gevent  | String   | 05XX            |      |
| detail.gold    | int      | 金币数             |      |
|                |          |                 |      |

{

“stateCode”:””,

“msg”:””

“data”[{

“gdate”:””,

“dayGold”:””

 “detail”[{

“gtype”:””

“gtime”:””,

“gevent”:””

“gold”:””

},…….]

},……..]

”}

 

## 3.8 运动数据下载

功能：从健康后台下载运动数据

请求包体：   

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| username  | String   | 用户名          |
| startDate | String   | 开始日期yyyyMMdd |
| endDate   | String   | 结束日期yyyyMMdd |

 

{"username":"iwan2"," startDate ":"20140101"," endDate":"20140228"}

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回运动状态组[] |

 

data字典：

| **标识**              | **数据类型**   | **说明**                 |      |      |      |      |
| ------------------- | ---------- | ---------------------- | ---- | ---- | ---- | ---- |
| data .startTime     | String     | 每次起始时间yyyyMMddHHmmss   |      |      |      |      |
| data .endTime       | String     | 每次运动结束时间yyyyMMddHHmmss |      |      |      |      |
| data .sportTypeCode | Integer    | 运动类型：（0为走路，1为跑步，2为骑行）  |      |      |      |      |
| data .distance      | int        | 距离                     |      |      |      |      |
| data .calorie       | float      | 消耗卡路里                  |      |      |      |      |
| data .livenCode     | String     | 有氧值标记（0不是有氧值、1有氧值）     |      |      |      |      |
| data .gmode         | Integer    | 0代表gps的记录,1代表手环的记录，    |      |      |      |      |
| data.pace           | Integer    | 步数                     |      |      |      |      |
| data .location      |            | 经纬度数组[]                |      |      |      |      |
|                     | BigDecimal | longitude              | 经度   |      |      |      |
| latitude            | 维度         |                        |      |      |      |      |
| distance（int）       | 距离         |                        |      |      |      |      |
| speed(float)        | 速度         |                        |      |      |      |      |
|                     |            |                        |      |      |      |      |

{

“stateCode”:””,

“msg”:””,

“data”[{

“startTime”:””,

 “endTime”:””,

“sportTypeCode”:””,

”distance”:”” ,

“calorie”:””

“livenCode”:””,

“gmode”:””

“pace”:””

" location "[……..] 

},……..

]

}

## 3.9 上传MAC地址

功能：上传MAC地址数据****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |
| mac      | String   | mac地址  |

{“username”:”” ,”mac”:””,”uuid”:””,”manuCode”:””}****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

{

“stateCode”:””,

“msg”:””,

}

## 3.10 下载MAC地址

功能：获取MAC地址数据****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |

{“username”:”” }****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      | String   | 返回mac地址   |

{

“stateCode”:””,

“msg”:””,

“data”:{ “mac”:””,

               “uuid”:””,

          “manuCode”:””

}

}

## 3.11 上传设置信息

功能：向健康后台提交手环设置数据

（备注：哪个有修改发送哪个字段）

请求包体：

| **标识**           | **数据类型** | **说明**                                   |
| ---------------- | -------- | ---------------------------------------- |
| username         | String   | 用户名                                      |
| alarm            | String   | 闹钟设置                                     |
| caller           | String   | 来电设置                                     |
| sedentary        | String   | 久坐提醒设置                                   |
| music            | String   | 音乐设置                                     |
| sleep            | String   | 区间睡眠设置(跟发送给手环格式一样)                       |
| heartRateMonitor | String   | 心率监控开关（0关闭，1打开）                          |
| threeSlide       | String   | 三次滑动开关（0关闭，1打开）                          |
| wearHabit        | String   | 0,0(第一个为开关，0为关闭,1为打开，当第一个为1时第二个参数才有效，0表示左手，1表示右手） |
| smartReminder    | String   | 0（0关闭，1打开）(len=200,APP可参考下图)             |
|                  |          |                                          |
|                  |          |                                          |

{

“username”:””,

“alarm”:””,

“caller”:””

“sedentary”:””,

“music”:””,

“sleep”:””

“heartRateMonitor”:””,

“threeSlide”:””,

“wearHabit”:””,

“smartReminder”:””

 

}

![img](file://localhost/private/var/folders/w3/kpgg67215236_h1xdpgm6cw40000gn/T/TemporaryItems/msoclip/0/clip_image002.png)

响应包体：            

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

 

{

“stateCode”:””,

“msg”:””

”}

 

 

## 3.12 下载设置信息

功能：向健康后台获取手环设置数据

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 用户名    |

{“username”:””,}

响应包体：            

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回设置信息    |

 

data字典：

| 名称                    | 类型     | 描述                                       |
| --------------------- | ------ | ---------------------------------------- |
| data.alarm            | String | 闹钟设置                                     |
| data.caller           | String | 来电设置                                     |
| data.sedentary        | String | 久坐提醒设置                                   |
| data.music            | String | 音乐设置                                     |
| data.sleep            | String | 区间睡眠设置                                   |
| data.heartRateMonitor | String | 心率监控开关（0关闭，1打开）                          |
| data.threeSlide       | String | 三次滑动开关（0关闭，1打开）                          |
| data.wearHabit        | String | 0,0(第一个为开关，0为关闭,1为打开，当第一个为1时第二个参数才有效，0表示左手，1表示右手） |
| data.smartReminder    | String | 0（0关闭，1打开）(len=200)                      |
|                       |        |                                          |
|                       |        |                                          |

 

{

“stateCode”:””,

“msg”:””,

data:{

          “alarm”:””,

“caller”:””

“sedentary”:””,

“music”:””,

“sleep”:””

“heartRateMonitor”:””,

“threeSlide”:””,

“wearHabit”:””,

“smartReminder”:””

 

}

”}

## 3.13 上传目标信息

功能：上传目标数据****

请求包体：

| **标识**   | **数据类型** | **说明**   |
| -------- | -------- | -------- |
| username | String   | 账号       |
| sleepAim | String   | 睡眠目标  分钟 |
| sportAim | Int      | 运动目标     |

{“username”:”” ,”sleepAim”:””,” sportAim”:””}****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

{

“stateCode”:””,

“msg”:””,

}

## 3.14 下载目标信息

功能：获取目标设置信息****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |

{“username”:”” }****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回目标设置信息  |

data字典：

| **标识**          | **数据类型** | **说明** |
| --------------- | -------- | ------ |
| data.  sleepAim | String   | 睡眠目标   |
| data.  sportAim | int      | 运动目标   |

{

“stateCode”:””,

“msg”:””

“data”:{

“sleepAim”:””,

“sportAim”:””

},

”}

## 3.15 上传分享信息

功能：上传分享数据****

请求包体：

| **标识**   | **数据类型** | **说明**                     |
| -------- | -------- | -------------------------- |
| username | String   | 账号                         |
| gevent   | String   | 事件类型编码010201/010202/010203 |
| socialID | String   | 社交账号                       |

{“username”:”” ,”gevent”:””,” socialID”:””}****

响应包体：            

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回金币数     |

data字典：

| **标识**        | **数据类型** | **说明**          |      |      |
| ------------- | -------- | --------------- | ---- | ---- |
| data.  gdate  | String   | 得金币时间（yyyyMMdd） |      |      |
| data.detail   |          | 详情数组[]          |      |      |
| detail.gtype  | String   | 类型编码01          |      |      |
| detail.gtime  | String   | 得金币时间（HH:mm ）   |      |      |
| detail.gevent | String   |                 |      |      |
| detail.gold   | int      | 金币数             |      |      |
|               |          |                 |      |      |

{

“stateCode”:””,

“msg”:””

“data”:{

“gdate”:””

“detail”[

{

“gtype”:””

“gtime”:””,

“gevent”:””

“gold”:””

}]

”}

## 3.16 上传绑定社交账号信息

功能：获取绑定账号金币信息****

请求包体：

| **标识**   | **数据类型** | **说明**                     |
| -------- | -------- | -------------------------- |
| username | String   | 账号                         |
| gevent   | String   | 社交类型编码010301/010302/010303 |
| socialID | String   | 社交账号                       |

{“username”:”” ,”gevent”:””,” socialID”:””}****

响应包体：            

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回金币数     |

data字典：

| **标识**        | **数据类型** | **说明**          |      |      |
| ------------- | -------- | --------------- | ---- | ---- |
| data.gdate    | String   | 得金币时间（yyyyMMdd） |      |      |
| data.detail   |          | 详情数组[]          |      |      |
| detail.gtype  | String   | 类型编码01          |      |      |
| detail.gtime  | String   | 得金币时间（HH:mm ）   |      |      |
| detail. gevnt | String   |                 |      |      |
| detail. gold  | int      | 金币数             |      |      |
|               |          |                 |      |      |

{

“stateCode”:””,

“msg”:””

“data”:{

“gdate”:””

“detail”[

{

“gtype”:””

“gtime”:””,

“gevent”:””

“gold”:””

}]

”}

## 3.17 金币数据下载

功能：从健康后台下载金币详情数据

请求包体：   

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| username  | String   | 用户名          |
| startDate | String   | 开始日期yyyyMMdd |
| endDate   | String   | 结束日期yyyyMMdd |

 

{"username":"iwan2"," startDate ":"20140101"," endDate":"20140228"}

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回金币[]    |

 

data字典：

| **标识**         | **数据类型** | **说明**        |      |
| -------------- | -------- | ------------- | ---- |
| data  .total   | long     | 累计最新金币数       |      |
| data.every     |          | 返回金币详情组[]     |      |
| every . gdate  | String   | 日期（yyyyMMdd）  |      |
| data  .dayGold | int      | 当天总的上限金币数     |      |
| every .count   | int      | 当天获得金币数       |      |
| every.detail   |          | 详情数组[]        |      |
| detail.gtype   | String   | 类型编码          |      |
| detail. gtime  | String   | 得金币时间（HH:mm ） |      |
| detail. gevent | String   |               |      |
| detail. gold   | int      | 金币数           |      |
|                |          |               |      |

{

“stateCode”:””,

“msg”:””,

 “data”:{

 “total”:””,

       “every”:[{

“gdate”:””,

“dayGold”:””

” count”:”” ,

“detail”[{

“gtype”:””

“gtime”:””,

“gevent”:””

“count”:””

},…….]

},……..]

}

}

## 3.18 请求版本信息

功能：从健康后台下载版本信息或金币事件说明

请求包体：   

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| gtype     | String   | 类型编码03/04 |
| goldVer   | Int      | 金币规则版本号   |
| noticeVer | int      | 通知版本号     |

 

{"gtype ":"03"，”goldVer “**:”100”****，”** noticeVer**”:”0”**}

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回版本信息    |

 

data字典：

| **标识**                 | **数据类型** | **说明**         |      |
| ---------------------- | -------- | -------------- | ---- |
| data  .deviceVer       |          | 版本信息数组         |      |
| deviceVer.appname      | String   | 设备名            |      |
| deviceVer.appurl       | String   | 下载地址           |      |
| deviceVer.gtype        | String   | 设备类型编码         |      |
| deviceVer. Ver         | int      | 用户版本号          |      |
| deviceVer.internalVer  | int      | 内部版本号          |      |
| deviceVer.manufCode    | int      | 厂商代码           |      |
| deviceVer.md5          | String   | 升级包md5校验码      |      |
| deviceVer.explains     | String   | 升级更新内容         |      |
| deviceVer.  explainsEN | String   | 英文 升级更新内容      |      |
| data. goldVer          | int      | 金币规则版本号  100   |      |
| data  . goldRule       |          | 金币规则数组         |      |
| gevent                 | String   | 设备编码010201     |      |
| CHmsg                  | String   | 中文文字说明 s%代表通字符 |      |
| ENmsg                  | String   | 英文文字说明 s%代表通字符 |      |
| data .noticeVer        | int      | 通知版本号          |      |
| data .noticeMsg        |          | 通知内容数组         |      |
| CHmsg                  | String   | 中文文字说明         |      |
| ENmsg                  | String   | 英文文字说明         |      |
| data.dfuTime           | String   | 升级时间           |      |
|                        |          |                |      |

（备注：发送03或04类型编码，返回01、02、03\04三种设备的deviceVer版本信息数组；

当APP请求数据的系统参数protocolType版本号小于后台的版本，才会在后面增加返回protocolType和goldRule）

{

“stateCode”:””,

“msg”:””,

 “data”:{

“deviceVer”[{

“appname”:””

“appurl”:””,

“gtype”:””

“Ver”:””

“md5”:””

“explains”:””

“explainsEN”:””

},…….]},

 ” goldVer”:”100” ,

“goldRule”[{

“gevent”:””

“cHmsg”:””,

“eNmsg”:””

},…….]},

  ” .noticeVer”:”0” ,

“noticeMsg”[{

 “cHmsg”:””,

“eNmsg”:””

},…….]},

         “dfuTime”:””

 

}

}

## 3.19 历史数据下载

功能：从健康后台下载睡眠数据、运动数据、金币详情数据

请求包体：   

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| username  | String   | 用户名          |
| startDate | String   | 开始日期yyyyMMdd |
| endDate   | String   | 结束日期yyyyMMdd |

 

{"username":"iwan2"," startDate ":"20140101"," endDate":"20140228"}

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回历史数据    |

 

data字典：

| **标识**          | **数据类型** | **说明**    |
| --------------- | -------- | --------- |
| data  .sleeps   |          | 历史睡眠数据    |
| data.sports     |          | 历史运动数据    |
| data.golds      |          | 返回金币详情组[] |
| data.heartrates |          | 返回实时心率数据  |

{

“stateCode”:””,

“msg”:””,

 “data”:{

“sleeps”:[{

        “gdate”:””,

“sleepTime”:””,

”gtime”:”” 

“wakeupTime”:””,

“wakeup”:””,

” quantity”:”” ,

"sleepState"[……..] 

“heartRates” [{“gt”:””,” gv”:”” },…….]

},……..],

         “sports”: [{

“startTime”:””,

 “endTime”:””,

“sportTypeCode”:””,

”distance”:”” ,

“calorie”:””

“livenCode”:””,

“gmode”:””

“pace”:””

" location "[……..] 

},……..]

” golds”:{

“total”:””,

               “every”:[{

“gdate”:””,

“dayGold”:””

” count”:”” ,

“detail”[{

“gtype”:””

“gtime”:””,

“gevent”:””

“count”:””

},…….]

},……..]

}

 ‘heartrates’:[{“gt”:””,”gv”:””},……]

}

 

## 3.20 上传NC地址

功能：上传NC地址数据****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |
| NC       | String   | 客户NC地址 |

{“username”:”” ,”NC”:””}****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

{

“stateCode”:””,

“msg”:””,

}

 

## 3.21 科腾历史数据下载

功能：从健康后台下载睡眠数据、运动数据

请求包体：   

| **标识**    | **数据类型** | **说明**                   |
| --------- | -------- | ------------------------ |
| companys  | String   | 公司                       |
| passwd    | String   | 密码                       |
| code      | String   | 公司码011                   |
| sn        | String   | 手环SN                     |
| username  | String   | 手环用户名                    |
| startDate | String   | 开始日期yyyyMMdd（用户提交数据记录日期） |
| endDate   | String   | 结束日期yyyyMMdd（当前日期）       |

 

{"companys":"keteng","passwd":"123","code":"011",**”****sn”:”11111”,**"startDate":"20140101"," endDate ":"20140228"}

或：

{"companys":"keteng","passwd":"123","code":"011",**”username”:”222222”**,"startDate":"20140101"," endDate":"20140228"}

 

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回历史数据    |

 

data字典：

| **标识**          | **数据类型** | **说明**               |
| --------------- | -------- | -------------------- |
| data  .sendtime | String   | 用户提交数据记录时间（yyyyMMdd） |
| data  .sleeps   |          | 历史睡眠数据               |
| data.sports     |          | 历史运动数据               |

 

Slees历史睡眠数据：

| **标识**     | **数据类型** | **说明**                  |
| ---------- | -------- | ----------------------- |
| gdate      | String   | 睡眠日期（yyyyMMdd）          |
| sleepTime  | String   | 入睡时间（yyyyMMddHHmm）      |
| gtime      | Integer  | 睡眠时长                    |
| wakeupTIme | String   | 醒来时间 （yyyyMMddHHmm）     |
| wakeup     | Integer  | 醒来次数                    |
| quantity   | Float    | 质量分                     |
| sleepState | String   | 睡眠状态数组（”sleepState”:[]） |
| heartRates | String   | 心率数据数组（”heartRates”:[]） |

 

sleepState：睡眠状态数组

| **标识**    | **数据类型** | **说明**               |
| --------- | -------- | -------------------- |
| stateCode | String   | 睡眠状态码                |
| startTime | String   | 状态开始时间（yyyyMMddHHmm） |
| endTime   | String   | 状态结束时间（yyyyMMddHHmm） |

 

heartRates心率数据数组

| **标识** | **数据类型** | **说明**         |
| ------ | -------- | -------------- |
| gt     | String   | 时间yyyyMMddHHmm |
| gv     | int      | 值              |

 

Sport运动数据数组：

| **标识**        | **数据类型** | **说明**                 |      |      |      |
| ------------- | -------- | ---------------------- | ---- | ---- | ---- |
| startTime     | String   | 每次起始时间yyyyMMddHHmmss   |      |      |      |
| endTime       | String   | 每次运动结束时间yyyyMMddHHmmss |      |      |      |
| sportTypeCode | Integer  | 运动类型：（0为走路，1为跑步，2为骑行）  |      |      |      |
| distance      | int      | 距离                     |      |      |      |
| calorie       | float    | 消耗卡路里                  |      |      |      |
| livenCode     | String   | 有氧值标记（0不是有氧值、1有氧值）     |      |      |      |
| gmode         | Integer  | 0代表gps的记录,1代表手环的记录，    |      |      |      |
| pace          | Integer  | 步数                     |      |      |      |
|               |          |                        |      |      |      |

{

 

{

“stateCode”:””,

“msg”:””,

 “data”:{

      “sendtime”:”20141010”

“sleeps”:[{

        “gdate”:””,

“sleepTime”:””,

”gtime”:”” 

“wakeupTime”:””,

“wakeup”:””,

” quantity”:”” ,

"sleepState"[{“stateCode”:””,”startTime”:””,”endTime”:””},…….] 

 “heartRates” [{“gt”:””,” gv”:”” },…….]

},……..],

         “sports”: [{

“startTime”:””,

 “endTime”:””,

“sportTypeCode”:””,

”distance”:”” ,

“calorie”:””

“livenCode”:””,

“gmode”:””

“pace”:””

" location "[……..] 

},……..]

},……..]

}

}

## 3.22 公司客户获取睡眠算法

功能：上传睡眠原始数据****

请求包体：

   ****

| **标识**               | **数据类型** | **说明**             |
| -------------------- | -------- | ------------------ |
| username             | String   | 公司用户名              |
| passwd               | String   | 密码                 |
| baseSleep            |          |                    |
| baseSleep .gtime     |          | 该次睡眠时间yyyyMMddHHmm |
| baseSleep.heartRates |          | 心率原始数据[]           |
| heartRates .gt       | String   | 时间yyyyMMddHHmm     |
| heartRates .gv       | int      | 值                  |
| baseSleep .acts      |          | 动作原始数据[]           |
| acts  .gt            | String   | 时间yyyyMMddHHmm     |
| acts .gv             | int      | 值                  |

 

{“username”:””,

 “passwd”:””

      “baseSleep”[“gtime”:””,

 “heartRates” [{“gt”:””,” gv”:”” },…….],

“acts” [{“gt”:””,” gv”:”” },…….],

},

{ “gtime”:””,

 “heartRates” [{“gt”:””,” gv”:”” },…….],

“acts” [{“gt”:””,” gv”:”” },…….],

}，

……..]

}  ****

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回睡眠状态组[] |

data字典：

| **标识**          | **数据类型** | **说明**                  |
| --------------- | -------- | ----------------------- |
| data.gdate      | String   | 睡眠日期（yyyyMMdd）          |
| data.sleepTime  | String   | 睡眠时间（yyyyMMddHHmm）      |
| data.gtime      | Integer  | 睡眠时长(分钟)                |
| data.wakeupTime | String   | 醒来时间 （yyyyMMddHHmm）     |
| data.wakeup     | Integer  | 醒来次数                    |
| data.quantity   | Float    | 质量分                     |
| data.sleepState | String   | 睡眠状态数组（”sleepState”:[]） |

**sleepState****：**

| **标识**    | **数据类型** | **说明**               |
| --------- | -------- | -------------------- |
| stateCode | String   | 睡眠状态码                |
| startTime | String   | 状态开始时间（yyyyMMddHHmm） |
| endTime   | String   | 状态结束时间（yyyyMMddHHmm） |

 

{

“stateCode”:””,

“msg”:””,

“data”[{

    “gdate”:””,

“sleepTime”:””,

”gtime”:”” 

“wakeupTime”:””,

“wakeup”:””,

” quantity”:”” ,

"sleepState"[{“stateCode”:””,”startTime”:””,”endTime”:””},…….] 

},……..

]

}

## 3.23 用户登录返回所有信息

功能：用户登录健康后台请求****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |
| passwd   | String   | 密码     |

{“username”:”” ,”passwd”:””}****

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回个人信息    |

data字典：

| **标识**         | **数据类型** | **说明**  |
| -------------- | -------- | ------- |
| data.info      |          | 个人信息    |
| data.set       |          | 手环设置    |
| data.aim       |          | 手环目标    |
| data.mac       | String   | 手环MAC地址 |
| data.bleparams |          | 蓝牙参数    |

 

 

响应值：

{

“stateCode”:””,

“msg”:””,

“data”:{

“info”{

“nickname”:””,

“sexCode”:””

“birthday”:””,

“height”:””,

“weight”:””,

“address”:””,

    “portraitUrl”:””,

},

       “set”{

“alarm”:””,

“caller”:””

“sedentary”:””,

“music”:””,

“sleep”:””

},

        “aim”{

“sleepAim”:””,

“sportAim”:””

},

        “mac”:”222222222222”,

               “bleparams”:{

                              “connparams”:””  //连接参数

}

}

## 3.24 上传第三方绑定信息

功能：向健康后台提交第三方ID数据

（备注：哪个有修改发送哪个字段）

请求包体：

 

| **标识**         | **数据类型** | **说明**                    |
| -------------- | -------- | ------------------------- |
| username       | String   | 用户名                       |
| bind           |          | 数组                        |
| bind .gtype    | String   | 02（参见四.4第三方接入gtype类型编码说明） |
| bind  .openid  | String   | 用户的ID，与微信号码一一对应           |
| Bind.tokenkey  | String   | access_token              |
| bind  .appid   | String   | 分配给应用的appid               |
| bind  .gstatus | int      | 0解绑,1绑定,2更新               |

{

“username”:””,

“bind”[{

“gtype”:”02”

 “openid”:”FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF”

“tokenkey”:””

“appid”:””

“gstatus”:””

},…….]},

}

响应包体：            

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| stateCode | String   | 成功/失败 状态码    |
| msg       | String   | 失败描述信息       |
| data      | String   | 返回以前绑定OPENID |

 

{

“stateCode”:””,

“msg”:””,

“data”:””

 }

 

 

## 3.25 获取微信链接

功能：获取微信地址数据****

请求包体：

| **标识**   | **数据类型** | **说明**  |
| -------- | -------- | ------- |
| username | String   | 用户名     |
| mac      | String   | 手环mac地址 |

** **

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      | String   | 返回微信链接地址  |

{

“stateCode”:””,

“msg”:””,

“data”:””,

}

## 3.26 获取SN或用户名

功能：根据NC获取用户名或许根据用户名获取NC****

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 账号     |
| sn       | String   | 客户NC地址 |

{“username”:”” }或

{”sn”:””}****

** **

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      | String   | 返回NC或用户名  |

{

“stateCode”:””,

“msg”:””,

“data”:””,

 

}

 

## 3.27 上传点测心率测量数据

功能：实时测量的心率数据保存并双传到服务器

请求包体：

| **标识**        | **数据类型** | **说明** |
| ------------- | -------- | ------ |
| username      | String   | 用户名    |
| heartrates    |          | 心率数组   |
| heartrates.gt | Sting    | 心率测量时间 |
| heartrates.gv | Integer  | 心率值    |

 

{

 “username”:””,

 “heartrates”:[{“gt”:””,“gv”:””},……]

}

回应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

 

{

“stateCode”:””,

“msg”:””

}

 

## 3.28 重置用户密码

功能：OPPO通过邮箱重置用户密码

请求包体：

| **标识** | **数据类型** | **说明** |
| ------ | -------- | ------ |
| email  | String   | 电子邮箱   |

 

{

 “email”:””

}

回应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

 

{

“stateCode”:””,

“msg”:””

}

 

## 3.29 修改用户密码

功能：OPPO通过邮箱重置用户密码

请求包体：

| **标识**    | **数据类型** | **说明** |
| --------- | -------- | ------ |
| username  | String   | 用户名    |
| oldPasswd | String   | 旧密码    |
| newPasswd | String   | 新密码    |

 

{

 “username”:””,

 “oldPasswd”:””,

 “newPasswd”:””

 

}

回应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

 

{

“stateCode”:””,

“msg”:””

}

 

## 3.30 获取蓝牙连接参数

功能：根据机型获取蓝牙连接参数

请求包体：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 用户名    |

{

 “username”:”” 

}

回应包体：

| **标识**          | **数据类型** | **说明**    |
| --------------- | -------- | --------- |
| stateCode       | String   | 成功/失败 状态码 |
| msg             | String   | 失败描述信息    |
| data            |          |           |
| data.connparams | String   | 连接参数      |

 

{

“stateCode”:””,

“msg”:””

“data”:{

    “connparams”:””,

}

## 3.31 上传专项运动

功能：上传专项运动数据****

n  请求包体：

| 标识                 | **数据类型**                                 | **说明**                                   |      |      |      |      |
| ------------------ | ---------------------------------------- | ---------------------------------------- | ---- | ---- | ---- | ---- |
| username           | String                                   | 账号                                       |      |      |      |      |
| rtsportdata        |                                          | 实时运动数组（”sportdate”:[]）                   |      |      |      |      |
| rtsportdata.gdate  | String                                   | 实时运动日期yyyyMMdd                           |      |      |      |      |
| rtsportdata.detail |                                          | 实时运动详细数组                                 |      |      |      |      |
| detail.startTime   | String                                   | 每次起始时间yyyyMMddHHmmss                     |      |      |      |      |
| detail.endTime     | String                                   | 每次运动结束时间yyyyMMddHHmmss                   |      |      |      |      |
| detail.speed       | Integer                                  | 时速（速度平均值，单位：10km/h，注：速度值精度为小数点后1位，未避免传浮点值，将值乘以10凑整） |      |      |      |      |
| detail.distance    | int                                      | 距离（单位：m）                                 |      |      |      |      |
| detail.calorie     | float                                    | 消耗卡路里                                    |      |      |      |      |
| detail.pace****    | Integer                                  | 步数                                       |      |      |      |      |
| detail .location   |                                          | 经纬度数组[]                                  |      |      |      |      |
|                    | BigDecimal                               | longitude                                | 经度   |      |      |      |
| latitude           | 纬度                                       |                                          |      |      |      |      |
| time               | 格式：yyyyMMddHHmmss  有GPS取GPS时间，没有则取手机系统时间 |                                          |      |      |      |      |
| direct（int）        | 方向（0~360°）                               |                                          |      |      |      |      |
| speed(float)       | 速度                                       |                                          |      |      |      |      |
| detail.heartrates  |                                          | 实时运动心率数组                                 |      |      |      |      |
|                    |                                          | gt                                       | 时间   |      |      |      |
| gv                 | 心率值                                      |                                          |      |      |      |      |
| detail.steps       |                                          | 专项运动步数数组                                 |      |      |      |      |
|                    |                                          | gt                                       | 时间   |      |      |      |
| gv                 | 心率值                                      |                                          |      |      |      |      |
|                    |                                          |                                          |      |      |      |      |

{

“username”:””,

“rtsportdata”:[{

 “gdate”:””,

“detail” :[{ “startTime”:””,

 “endTime”:””,

“speed”:””,

”distance”:”” ,

“calorie”:””

 “pace”:””,

" location ":[……..] ,

["](undefined) heartrates ":[{"gt":"","gv":""}……..]

["](undefined) steps ":[{"gt":"","gv":""}……..]

 

},…….]

},………..]

}

响应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

{

“stateCode”:””,

“msg”:””,

}

 

## 3.32 下载专项运动数据

从健康后台下载运动数据

n  请求包体：   

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| username  | String   | 用户名          |
| startDate | String   | 开始时间yyyyMMdd |
| endDate   | String   | 结束时间yyyyMMdd |

 

{"username":"iwan2"," startDate ":"20140101"," endDate":"20140228"}

响应包体： 

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |
| data      |          | 返回运动状态组[] |

 

data字典：

| **标识**            | **数据类型**                                 | **说明**                                   |      |      |      |      |      |      |      |
| ----------------- | ---------------------------------------- | ---------------------------------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| data .startTime   | String                                   | 每次起始时间yyyyMMddHHmmss                     |      |      |      |      |      |      |      |
| data .endTime     | String                                   | 每次运动结束时间yyyyMMddHHmmss                   |      |      |      |      |      |      |      |
| data . speed      | Integer                                  | 速度（平均值，单位：10km/h，注：速度值精度为小数点后1位，未避免传浮点值，将值乘以10凑整） |      |      |      |      |      |      |      |
| data .distance    | Integer                                  | 距离（单位：m）                                 |      |      |      |      |      |      |      |
| data.calorie      | float                                    | 消耗卡路里                                    |      |      |      |      |      |      |      |
| data.pace****     | Integer                                  | 步数                                       |      |      |      |      |      |      |      |
| data .location    |                                          | 经纬度数组[]                                  |      |      |      |      |      |      |      |
|                   | BigDecimal                               | longitude                                | 经度   |      |      |      |      |      |      |
| latitude          | 纬度                                       |                                          |      |      |      |      |      |      |      |
| time              | 格式：yyyyMMddHHmmss  有GPS取GPS时间，没有则取手机系统时间 |                                          |      |      |      |      |      |      |      |
| direct（int）       | 方向（0~360°）                               |                                          |      |      |      |      |      |      |      |
| speed(float)      | 速度                                       |                                          |      |      |      |      |      |      |      |
| detail.heartrates |                                          | 实时运动心率数组                                 |      |      |      |      |      |      |      |
|                   |                                          | gt                                       | 时间   |      |      |      |      |      |      |
| gv                | 心率值                                      |                                          |      |      |      |      |      |      |      |
| detail.steps      |                                          | 专项运动步数数组                                 |      |      |      |      |      |      |      |
|                   |                                          | gt                                       | 时间   |      |      |      |      |      |      |
| gv                | 心率值                                      |                                          |      |      |      |      |      |      |      |
|                   |                                          |                                          |      |      |      |      |      |      |      |

{

“stateCode”:””,

“msg”:””,

“data”[{

{ “startTime”:””,

“endTime”:””,

“speed”:””,

”distance”:”” ,

“calorie”:””

 “pace”:””,

" location ":[……..] ,

" heartrates ":[{"gt":"","gv":""}……..]，

" steps ":[{"gt":"","gv":""}……..]

 

},……..

]

}

## 3.33获取使用情况

功能：上传汇总信息

请求参数：

| **标识**   | **数据类型** | **说明** |
| -------- | -------- | ------ |
| username | String   | 用户名    |

{

 “username”:”” 

}

 

回应包体：

| **标识**             | **数据类型** | **说明**    |
| ------------------ | -------- | --------- |
| stateCode          | String   | 成功/失败 状态码 |
| msg                | String   | 失败描述信息    |
| data               |          |           |
| data.totalstep     | String   | 总步数       |
| data.totaldistance | String   | 总距离       |
| data.totalaim      | String   | 达标次数      |

 

{

“stateCode”:””,

“msg”:””

“data”:{

    “totalstep”:””,

    “totaldistance”:””,

    “totalaim”:””

}

 

## 3.34 全天心率数据上传

功能：全天心率数据上传

请求参数：

| **标识**        | **数据类型** | **说明**                |
| ------------- | -------- | --------------------- |
| username      | String   | 用户名                   |
| dayHeartrates | []       | 心率数据数组                |
| startTime     | String   | 开始时间yyyyMMddHHmm      |
| endTime       | String   | 结束时间yyyyMMddHHmm      |
| heartrates    | []       | 心率数组                  |
| heartrates.gt | String   | 心率测量时间点yyyyMMddHHmmss |
| heartrates.gv | Int      | 心率测量值                 |

{

 “username”:””,

 “dayHeartrates”:[

                     {“startTime”:””,

        “endTime”:””,

        “heartrates”:[

                                {“gt”:”xxxx”,“gv”:xxx}, …, 

]}

…

]

}

 

回应包体：

| **标识**    | **数据类型** | **说明**    |
| --------- | -------- | --------- |
| stateCode | String   | 成功/失败 状态码 |
| msg       | String   | 失败描述信息    |

{

“stateCode”:””,

“msg”:””

}

## 3.35全天心率数据下载

功能：全天心率数据下载

请求参数：

| **标识**    | **数据类型** | **说明**       |
| --------- | -------- | ------------ |
| username  | String   | 用户名          |
| startTime | String   | 开始时间yyyyMMdd |
| endTime   | String   | 结束时间yyyyMMdd |

{

 “username”:””,

“startTime”:””,

 “endTime”:””,

}

 

回应包体：

| **标识**        | **数据类型** | **说明**                |
| ------------- | -------- | --------------------- |
| stateCode     | String   | 成功/失败 状态码             |
| msg           | String   | 失败描述信息                |
| data          | []       |                       |
| startTime     |          |                       |
| endTime       | String   | 结束时间yyyyMMddHHmm      |
| heartrates    | []       | 心率数组yyyyMMddHHmm      |
| heartrates.gt | String   | 心率测量时间点yyyyMMddHHmmss |
| heartrates.gv | Int      | 心率测量值                 |

{

“stateCode”:””,

“msg”:””,

“data”:[

                     {

“startTime”:””,

        “endTime”:””,

        “heartrates”:[

                                {“gt”:”xxxx”, “gv”:xxx}, …, 

]

}

…

]

}

 

 

# 四、事件类型编码

**1.gtype类型编码说明**

| **类型** | **类型编码** | **参数说明** |
| ------ | -------- | -------- |
| 社交     | 01       |          |
| 睡眠     | 02       |          |
| 运动     | 03       |          |
| 习惯奖    | 04       | 习惯得奖类型   |
| 消耗     | 05       | 兑换或抽奖产品  |

 

 

**2.gevent事件编码说明**

**(1)社交事件类型**

| 事件   | 类型编码 | 参数说明       |
| ---- | ---- | ---------- |
| 签到   | 01   | 0101代表签到   |
| 分享   | 02   | 0102开头代表分享 |
| 绑定   | 03   | 0103开头代表绑定 |

 

| **社交名称** | **类型编码** | **参数说明**       |
| -------- | -------- | -------------- |
| 新浪微博     | 01       | 010201代表新浪微博分享 |
| 微信       | 02       | 010202代表微信分享   |
| QQ空间     | 03       | 010303代表绑定QQ空间 |
|          |          |                |

 

**（2）睡眠事件类型（待定）**

| 事件     | 类型编码 | 参数说明   |
| ------ | ---- | ------ |
| 早睡     | 01   | 020100 |
| 睡眠时长充足 | 02   | 020200 |
|        |      |        |

 

**（3）运动事件类型（待定）**

| 事件    | 类型编码 | 参数说明   |
| ----- | ---- | ------ |
| 运动获得  | 01   | 030100 |
| 目标达到  | 02   | 030200 |
| 运动达人奖 | 03   | 030300 |
|       |      |        |



**（4）习惯事件类型（待定）**

| 事件             | 类型编码 | 参数说明       |
| -------------- | ---- | ---------- |
| 一周连续5天以上达到运动目标 | 01   | 040100习惯运动 |
| 一周连续5天以上睡眠充足   | 02   | 040200充足睡眠 |
| 一周连续5天以上23点前入睡 | 03   | 040300早睡   |
|                |      |            |

 

**（5）兑奖事件类型**

| 事件   | 类型编码 | 参数说明   |
| ---- | ---- | ------ |
| 兑奖   | 01   | 050100 |
| 抽奖   | 02   | 050200 |
| 奖励   | 03   | 050300 |

 

**3.设备软件gtype类型编码说明**

| **类型** | **类型编码** | **参数说明** |
| ------ | -------- | -------- |
| 手环     | 01       |          |
| 手环蓝牙版本 | 02       |          |
| 安卓     | 03       |          |
| ios    | 04       |          |

 

**4.第三方接入gtype类型编码说明**

| **类型** | **类型编码** | **参数说明** |
| ------ | -------- | -------- |
| QQ     | 01       |          |
| 微信     | 02       |          |
|        | 03       |          |



**5.金币规则编码说明**

| **类型编码** | **参数说明** | **中文描述**         | **英文描述**                                 |
| -------- | -------- | ---------------- | ---------------------------------------- |
| 010201   | 新浪微博分享   | 新浪微博分享获得         | Sharing by Weibo                         |
| 010202   | 微信分享     | 微信分享获得           | Sharing by Wechat                        |
| 010203   | QQ空间分享   | QQ空间分享获得         | Sharing by Qzone                         |
| 010301   | 绑定新浪微博   | 绑定新浪微博账号获得       | Binding  Weibo                           |
| 010302   | 绑定微信账号   | 绑定微信账号获得         | Binding Wechat                           |
| 010303   | 绑定QQ空间账号 | 绑定QQ空间账号获得       | Binding Qzone                            |
| 020100   | 23点前早睡   | S% 健康早睡获得        | Go to bed early                          |
| 020200   | 睡眠时长     | 睡眠S% 获得          | Sleep S%                                 |
| 030100   | 运动       | 运动S% 步获得         | S% Steps                                 |
| 030200   | 目标达到     | 恭喜，完成S% 步目标      | Congratulations,met your S%  goal        |
| 030300   | 运动达人     | 恭喜，运动S% 步获得运动达人奖 | Contratulations,total S% steps  won Athletic Award |
| 040100   | 习惯运动     | 一周五天10000步       | 10000 steps per day,5 days a  week       |
| 040200   | 充足睡眠     | 一周五天充足睡眠         | Enough sleep per day,5 days a  week      |
| 040300   | 早睡       | 一周五天23:00前入睡     | Go to bed before 23:00 per  day,5 days a week |
| 050100   |          |                  |                                          |
| 050200   |          |                  |                                          |
| 050300   | 奖励       | 恭喜，获得金币奖励        | Contratulations！Get  gold awards         |

 

6．厂商代码

| **类型**       | **类型编码** | **参数说明** |
| ------------ | -------- | -------- |
| Fitband      | 01       |          |
| Oband        | 02       |          |
| ivviband     | 03       |          |
| 恒源祥          | 04       |          |
| coolband     | 05       |          |
| FitbandC     | 06       |          |
| grandband    | 07       |          |
| DONG         | 08       |          |
| TouchBand    | 09       |          |
| FitbandF4    | 10       |          |
| FitbandF3    | 11       |          |
| BestFit      | 12       |          |
| Lenovo_l1    | 13       | 联想智能跑鞋   |
| (B521)(B103) | 14       |          |
| B522(有屏无心率)  | 15       |          |
| B521(有屏有心率)  | 16       |          |
| B502         | 17       |          |
| B521A        | 18       |          |
| B522A        | 19       |          |
| B502A        | 20       |          |
| GrandbandC   | 21       |          |
| B517         | 22       |          |

 

7. 睡眠状态代码

| **类型** | **类型编码** | **参数说明** |
| ------ | -------- | -------- |
| 未知     | -1       |          |
| 醒来     | 0        |          |
| 做梦     | 1        |          |
| 浅睡眠    | 2        |          |
| 深睡眠    | 3        |          |
| 入眠     | 4        |          |
| 没戴     | 5        |          |

 

 

# 五、数据库

## 5.1 用户表 T_USER

| **字段名**    | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ---------- | -------- | -------- | -------- | ----------------------- |
| userid     | Vchar    | 32       | PK       | 唯一ID                    |
| username   | vchar    | 32       |          | 账号                      |
| passwd     | vchar    | 50       |          | 密码                      |
| email      | vchar    | 32       |          | 邮箱                      |
| showname   | vchar    | 20       |          | 昵称（以后如果有第三方登录需要）        |
| deviceId   | vchar    | 36       |          | 设备IMEI号                 |
| mobileType | vchar    | 30       |          | 手机型号                    |
| systemVer  | vchar    | 20       |          | 系统版本                    |
| TS         | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.2 用户详细信息表 T_USERINFO

| **字段名**     | **字段类型** | **字段长度** | **字段约束** | **字段描述**                 |
| ----------- | -------- | -------- | -------- | ------------------------ |
| userid      | Vchar    | 32       | Index    | 唯一ID(不用自动生成，直接用注册表的ID)   |
| username    | vchar    | 32       |          | 账号                       |
| nickname    | vchar    | 20       |          | 昵称                       |
| sexCode     | vchar    | 2        |          | 性别 男1/女 0                |
| birthday    | Varchar  | 10       |          | 出生日期（格式:  yyyyMMdd）      |
| height      | int      | 4        |          | 身高                       |
| weight      | Varchar  | 6        |          | 体重                       |
| address     | vchar    | 100      |          | 地址（精确到市）                 |
| portraitId  | vchar    | 32       |          | 头像地址id，外键T_PORTRAILT的OID |
| portraitUrl | vchar    | 200      |          | 头像地址                     |
| TS          | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss  |

## 5.3 用户头像路径表 T_PORTRAILT

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述** |
| -------- | -------- | -------- | -------- | -------- |
| oid      | Vchar    | 32       | PK       | 唯一ID     |
| dir      | vchar    | 50       |          | 目录       |
| fileName | vchar    | 64       |          | 头像名      |
| isValid  | int      | 2        |          |          |

 

## 5.4 参数设置表 T_PARAMSETTING

| **字段名**   | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| --------- | -------- | -------- | -------- | ----------------------- |
| userid    | Vchar    | 32       | Index    | 唯一ID(不用自动生成，直接用注册表的ID)  |
| username  | vchar    | 32       |          | 帐号                      |
| alarm     | vchar    | 50       |          | 闹钟设置                    |
| caller    | vchar    | 50       |          | 来电设置                    |
| sedentary | vchar    | 50       |          | 久坐提醒设置                  |
| music     | vchar    | 50       |          | 音乐设置                    |
| sleep     | vchar    | 50       |          | 区间睡眠设置                  |
| TS        | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.5 MAC地址表 T_MACADDRESS

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    | 32       | PK       | 唯一ID                    |
| username | vchar    | 32       |          | 账号                      |
| mac      | vchar    | 20       |          | Mac地址                   |
| gstatus  | Int      | 2        |          | 使用状态 0：停用 1：正常          |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.6 目标设置表 T_AIMSETTING

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| userid   | Vchar    | 32       | Index    | 唯一ID                    |
| username | vchar    | 32       |          | 账号(不超过20)               |
| sleepAim | vchar    | 10       |          | 睡眠时长目标int分钟             |
| sportAim | int      |          |          | 运动步数目标                  |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.7 金币记录表 T_GOLDDATA

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    | 32       | pk       | 唯一ID                    |
| username | Vhchar   | 32       | Index    | 账号                      |
| ggtype   | Vhchar   | 4        |          | 类型编码                    |
| socialID | vchar    | 32       |          | 社交账号                    |
| gdate    | vchar    | 8        | Index    | 得金币日期（yyyyMMdd）         |
| gtime    | vchar    | 5        |          | 得金币时间（HH:mm ）           |
| gevent   | vchar    | 20       |          | 产生金币的事件编码               |
| gold     | int      |          |          | 金币数                     |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.8 心率记录表 T_HEARTDATA

| **字段名**    | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ---------- | -------- | -------- | -------- | ----------------------- |
| oid        | Vchar    | 32       | pk       | 唯一ID                    |
| username   | VCHAR    | 32       |          | 账号                      |
| gdate      | VCHAR    |          |          | 心率时间yyyyMMddHHmm        |
| heartRates | vchar    | 500      |          | 心率数据                    |
| TS         | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.9 动作记录表 T_ACTIONDATA

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    | 32       | pk       |                         |
| username | Vchar    | 32       |          | 账号                      |
| gdate    | VCHAR    |          |          | 动作时间yyyyMMddHHmm        |
| acts     | Longtext |          |          | 提交数据                    |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.10 睡眠汇总表 T_SLEEPSUMMARY

| **字段名**    | **字段类型** | **字段长度** | **字段约束**     | **字段描述**                |
| ---------- | -------- | -------- | ------------ | ----------------------- |
| oid        | Vchar    | 32       | PK           |                         |
| username   | varchar  | 32       | Index        | 账号                      |
| gdate      | vchar    |          | 睡眠日期yyyyMMdd |                         |
| sleepTime  | VCHAR    | 20       |              | 睡眠起始时间                  |
| wakeupTIme | VCHAR    | 20       |              | 睡眠结束时间                  |
| gtime      | Int      |          |              | 睡眠时长                    |
| wakeup     | int      |          |              | 醒来次数                    |
| quantity   | float    |          |              | 睡眠得分                    |
| TS         | vchar    | 20       |              | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.11 睡眠状态表 T_SLEEPSTATUS

| **字段名**   | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| --------- | -------- | -------- | -------- | ----------------------- |
| oid       | Vchar    | 32       | pk       |                         |
| username  | vchar    | 32       |          | 账号                      |
| startTime | VCHAR    |          |          | 状态开始时间（yyyyMMddHHmm）    |
| endTime   | VCHAR    |          |          | 状态结束时间（yyyyMMddHHmm）    |
| stateCode | vchar    | 20       |          | 睡眠状态码                   |
| bid       | Vchar    | 32       | Index    | 外键T_SLEEPSUMMARY的id     |
| TS        | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.12 睡眠心率值表 T_HEARTVALUE 

| **字段名**    | **字段类型**   | **字段长度** | **字段约束** | **字段描述**                |
| ---------- | ---------- | -------- | -------- | ----------------------- |
| oid        | Vchar      | 32       | pk       |                         |
| username   | vchar      | 32       |          | 账号                      |
| gdate      | VCHAR      |          |          | 日期（yyyyMMddHHmm）        |
| heartvalue | mediumtext |          |          | 心率分析值                   |
| bid        | Vchar      | 32       | Index    | 外键T_SLEEPSUMMARY的id     |
| TS         | vchar      | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.13 睡眠动作值表 T_ACTIONVALUE 

| **字段名**  | **字段类型**   | **字段长度** | **字段约束** | **字段描述**                |
| -------- | ---------- | -------- | -------- | ----------------------- |
| oid      | Vchar      | 32       | pk       |                         |
| username | vchar      | 32       |          | 账号                      |
| gdate    | VCHAR      |          |          | 日期（yyyyMMddHHmm）        |
| actvalue | mediumtext |          |          | 动作分析值                   |
| bid      | Vchar      | 32       | Index    | 外键T_SLEEPSUMMARY的id     |
| TS       | vchar      | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.14 运动记录表 T_SPORTDATA

| **字段名**       | **字段类型** | **字段长度** | **字段约束**             | **字段描述**                |
| ------------- | -------- | -------- | -------------------- | ----------------------- |
| oid           | Vchar    | 32       | PK                   |                         |
| username      | vchar    | 32       | Index                | 账号                      |
| startTime     | VCHAR    |          | 运动开始时间yyyyMMddHHmmss |                         |
| endTime       | VCHAR    |          |                      | 运动结束时间yyyyMMddHHmmss    |
| sportTypeCode | Integer  |          |                      | 运动类型：（0为走路，1为跑步，2为骑行）   |
| distance      | int      |          |                      | 距离                      |
| calorie       | float    |          |                      | 卡路里                     |
| livenCode     | varchar  | 2        |                      | 有氧值标记（0无氧值、1有氧值）        |
| gmode         | int      |          |                      | 设备类型                    |
| pace          | Integer  |          |                      | 步数                      |
| TS            | vchar    | 20       |                      | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.15 运动轨迹表 T_COORDINATE

| **字段名**   | **字段类型**  | **字段长度** | **字段约束** | **字段描述**                |
| --------- | --------- | -------- | -------- | ----------------------- |
| oid       | Vchar     |          | PK       |                         |
| longitude | float     | 20       |          | 经度                      |
| latitude  | float     |          |          | 经度                      |
| distance  | Int       |          |          | 距离                      |
| speed     | **float** |          |          | 速度                      |
| bid       | Vchar     | 32       | Index    | 外键T_SPORTDATA的id        |
| TS        | vchar     | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.16 运动每天统计表 T_SPORTDAY

| **字段名**  | **字段类型** | **字段长度** | **字段约束**   | **字段描述**                |
| -------- | -------- | -------- | ---------- | ----------------------- |
| oid      | Vchar    |          | PK         |                         |
| username | Vchar    | 32       | Index      | 用户名                     |
| gdate    | vchar    |          | YYYYMMDD日期 |                         |
| allpace  | int      |          |            | 每天总步数                   |
| aimstate | Int      |          |            | 是否达到目标                  |
| stime    | int      |          |            | 每次提交数据的起始时间             |
| TS       | vchar    | 20       |            | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.17 睡眠每天统计表 T_SLEEPDAY

| **字段名**    | **字段类型** | **字段长度** | **字段约束**   | **字段描述**                |
| ---------- | -------- | -------- | ---------- | ----------------------- |
| oid        | Vchar    |          | PK         |                         |
| username   | Vchar    | 32       | Index      | 用户名                     |
| gdate      | vchar    | 10       | YYYYMMDD日期 |                         |
| alltime    | int      |          |            | 每天睡眠总时长                 |
| aimstate   | Int      | 1        |            | 睡眠是否达到目标                |
| earlystate | Int      | 1        |            | 早睡是否满足目标                |
| TS         | vchar    | 20       |            | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.18 设备版本信息表 T_DEVICEVER

| **字段名**     | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ----------- | -------- | -------- | -------- | ----------------------- |
| oid         | Vchar    |          | PK       |                         |
| appname     | Vchar    | 128      |          | 设备名                     |
| appurl      | Vchar    | 256      |          | 下载地址                    |
| gtype       | Vchar    | 2        |          | 设备类型编码                  |
| ver         | Int      |          |          | 正式用户版本号                 |
| internalVer | int      |          |          | 内部版本号                   |
| manufCode   | int      |          |          | 厂商代码                    |
| md5         | vchar    | 50       |          | 升级包校验码                  |
| explains    | vchar    | 200      |          | 升级说明                    |
| explainsEN  | vchar    | 200      |          | 英文升级说明                  |
| TS          | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.19 金币规则说明表 T_GOLDRULE

| **字段名** | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ------- | -------- | -------- | -------- | ----------------------- |
| oid     | Vchar    |          | PK       |                         |
| gevent  | Vchar    | 6        |          | 设备名                     |
| cHmsg   | Vchar    | 50       |          | 中文文字说明                  |
| eNmsg   | Vchar    | 50       |          | 英文文字说明                  |
| TS      | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.20 客户账户编码SN表 T_CUSTOMUSER

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    |          | PK       |                         |
| username | Vchar    | 32       | Index    | 用户名                     |
| sn       | Vchar    | 20       | 手环SN     |                         |
| codes    | Vchar    | 20       |          | 客户编码                    |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.21 客户编码SN表 T_CUSTOMCODE

| **字段名** | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ------- | -------- | -------- | -------- | ----------------------- |
| oid     | Vchar    |          | PK       |                         |
| sn      | Vchar    | 20       | Index    | 手环SN                    |
| codes   | Vchar    | 20       |          | 客户编码                    |
| TS      | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.22 城市KEY表 T_CITYKEY

| **字段名** | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ------- | -------- | -------- | -------- | ----------------------- |
| oid     | Vchar    |          | PK       |                         |
| citykey | Vchar    | 20       | Index    | 城市KEY                   |
| cityZH  | Vchar    | 20       |          | 中文                      |
| cityEN  | Vchar    |          |          | 英文                      |
| cityTW  | vchar    | 20       |          | 台湾                      |
| TS      | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.23 用户设备版本表 T_VERSION

| **字段名**   | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| --------- | -------- | -------- | -------- | ----------------------- |
| oid       | Vchar    |          | PK       |                         |
| username  | Vchar    | 32       |          | 城用户名                    |
| manufCode | vchar    | 20       |          | 厂商代码                    |
| efmver    | vchar    | 20       |          | 手环固件版本                  |
| bluever   | Vchar    | 20       |          | 蓝牙版本                    |
| apkver    | Vchar    | 20       |          | 手机APK版本                 |
| phonever  | vchar    | 20       |          | 手机版本                    |
| phonetype | vchar    |          |          | 手机类型                    |
| TS        | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.24 绑定关联表 T_BIND

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    | 32       | PK       | 唯一ID                    |
| username | vchar    | 32       | Index    | 账号                      |
| gtype    | vchar    | 2        | 类型       |                         |
| openid   | vchar    | 32       | Index    | 用户的ID，与QQ号码一一对应         |
| tokenkey | vchar    | 32       |          | access_token            |
| appid    | vchar    | 32       |          | 申请QQ登录成功后，分配给应用的appid   |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.25 第三方上传表 T_THIRDSEND

 

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    |          | PK       |                         |
| username | Vchar    | 32       |          | 用户名                     |
| gdate    | vchar    |          |          | YYYYMMDD日期              |
| gtype    | vchar    | 2        |          | 类型                      |
| openid   | vchar    | 32       |          | 用户的ID，与QQ号码一一对应         |
| datatype | int      |          |          | 数据类型0运动/1睡眠             |
| gtimes   | int      |          |          | 每次运动的起始时间/睡眠总时间         |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.26 微信链接地址表 T_WXURL

| **字段名** | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ------- | -------- | -------- | -------- | ----------------------- |
| oid     | INT      |          |          | 唯一ID,自增                 |
| mac     | vchar    | 20       | Index    | Mac地址FF:FF:FF:FF:FF:FF  |
| wxurl   | vchar    | 500      |          | 微信二维码                   |
| TS      | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.27通知内容表 T_NOTICEVER

| **字段名**   | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| --------- | -------- | -------- | -------- | ----------------------- |
| oid       | Vchar    |          | PK       |                         |
| noticeVer | Int      |          |          | 消息版本                    |
| CHmsg     | Vchar    | 500      |          | 中文文字说明                  |
| ENmsg     | Vchar    | 500      |          | 英文文字说明                  |
| TS        | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.28 通知内容表 T_DFUSET

| **字段名**    | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ---------- | -------- | -------- | -------- | ----------------------- |
| oid        | Vchar    |          | PK       |                         |
| mobileType | Varchar  | 50       |          | 机型                      |
| dfuTime    | Vchar    | 50       |          | 升级时间                    |
| TS         | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.29 蓝牙连接参数表    T_BLEPARAMS

| **字段名**     | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ----------- | -------- | -------- | -------- | ----------------------- |
| oid         | Vchar    |          | PK       |                         |
| mobileType  | Varchar  | 50       |          | 机型                      |
| maxInterval | int      |          |          | 最大连接间隔                  |
| minInterval | int      |          |          | 最小连接间隔                  |
| TS          | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.30 专项运动表T_RTSPORTDATA

| **字段名**   | **字段类型** | **字段长度** | **字段约束**   | **字段描述**                |
| --------- | -------- | -------- | ---------- | ----------------------- |
| oid       | Vchar    | 32       | PK         |                         |
| username  | vchar    | 32       | Index      | 账号                      |
| gdate     | Vchar    | 10       | YYYYMMDD日期 |                         |
| startTime | VCHAR    |          |            | 实时运动开始时间yyyyMMddHHmmss  |
| endTime   | VCHAR    |          |            | 实时运动结束时间yyyyMMddHHmmss  |
| speed     | Integer  |          |            | 平均速度                    |
| distance  | int      |          |            | 距离                      |
| calorie   | float    |          |            | 卡路里                     |
| pace      | Integer  |          |            | 步数                      |
| TS        | vchar    | 20       |            | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.31 专项运动轨迹表T_RTSPORTTRACK

| **字段名**  | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| -------- | -------- | -------- | -------- | ----------------------- |
| oid      | Vchar    |          | PK       |                         |
| bid      | Vchar    | 32       | Index    | 外键T_RTSPORTDATA的id      |
| location | Longtext |          |          | 实时运动位置记录（json字符串）       |
| TS       | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

## 5.32 专项运动心率表T_RTSPORTHEARTRATE

| **字段名**    | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ---------- | -------- | -------- | -------- | ----------------------- |
| oid        | Vchar    |          | PK       |                         |
| bid        | Vchar    | 32       | Index    | 外键T_RTSPORTDATA的id      |
| heartrates | Longtext |          |          | 实时运动心率记录（json字符串）       |
| TS         | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

## 5.33 专项运动步数表表T_RTSPORTSTEP

| **字段名** | **字段类型** | **字段长度** | **字段约束** | **字段描述**                |
| ------- | -------- | -------- | -------- | ----------------------- |
| oid     | Vchar    |          | PK       |                         |
| bid     | Vchar    | 32       | Index    | 外键T_RTSPORTDATA的id      |
| steps   | Longtext |          |          | 实时运动步数记录（json字符串）       |
| TS      | vchar    | 20       |          | 产生时间yyyy-MM-dd HH:mm:ss |

 

 

